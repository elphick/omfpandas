
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/08_validate_blockmodel_sort_order.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_08_validate_blockmodel_sort_order.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_08_validate_blockmodel_sort_order.py:


Validate BlockModel Sort Order
==============================

A block model is a 3D array of cells, each with a set of attributes.  However, it is convenient to represent the
attributes as a vector.  The order of the data in the vector is determined by the order used in this (ravel) conversion.

The ravel order for OMF is C-style (row-major order).
The ravel order for Pandas is C-style (row-major order).
The ravel order for PyVista is F-style (column-major order).

- C-style - row-major order:  The last index (z) changes the fastest.  The first index (x) changes the slowest. :code:`df.sort_index(['x', 'y', 'z'])`
- F-style - column-major order:  The first index (x) changes the fastest.  The last index (z) changes the slowest. :code:`df.sort_index(['z', 'y', 'x'])`

This script completes some validations on the sort order of the block model data:

- parquet file -> dataframe
- dataframe -> omf file / regular block model
- omf file / regular block model -> dataframe
- pyvista visualisation

To conduct this test we use a small block model of shape (5, 4, 3) with a depth attribute.

So we will round-trip the data from the dataframe to the omf file, and back to a dataframe.
We will also check the visualisation performs as expected.

.. GENERATED FROM PYTHON SOURCE LINES 28-37

.. code-block:: Python

    from pathlib import Path

    import numpy as np
    import pandas as pd
    import pyvista as pv

    from omfpandas import OMFPandasWriter
    from omfpandas.utils import create_test_blockmodel








.. GENERATED FROM PYTHON SOURCE LINES 38-40

Create Block Model Dataframe
----------------------------

.. GENERATED FROM PYTHON SOURCE LINES 40-47

.. code-block:: Python


    shape = (5, 4, 3)
    block_size = (1.0, 1.0, 0.5)
    corner = (100.0, 200.0, 300.0)

    blocks: pd.DataFrame = create_test_blockmodel(shape, block_size, corner)








.. GENERATED FROM PYTHON SOURCE LINES 48-49

The dataframe is C-style (x, y, z).  The last index (z) changes the fastest.

.. GENERATED FROM PYTHON SOURCE LINES 49-52

.. code-block:: Python


    blocks






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th></th>
          <th></th>
          <th>c_style_xyz</th>
          <th>f_style_zyx</th>
          <th>depth</th>
        </tr>
        <tr>
          <th>x</th>
          <th>y</th>
          <th>z</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th rowspan="12" valign="top">100.5</th>
          <th rowspan="3" valign="top">200.5</th>
          <th>300.25</th>
          <td>0</td>
          <td>0</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>1</td>
          <td>20</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>2</td>
          <td>40</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">201.5</th>
          <th>300.25</th>
          <td>3</td>
          <td>5</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>4</td>
          <td>25</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>5</td>
          <td>45</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">202.5</th>
          <th>300.25</th>
          <td>6</td>
          <td>10</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>7</td>
          <td>30</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>8</td>
          <td>50</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">203.5</th>
          <th>300.25</th>
          <td>9</td>
          <td>15</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>10</td>
          <td>35</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>11</td>
          <td>55</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="12" valign="top">101.5</th>
          <th rowspan="3" valign="top">200.5</th>
          <th>300.25</th>
          <td>12</td>
          <td>1</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>13</td>
          <td>21</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>14</td>
          <td>41</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">201.5</th>
          <th>300.25</th>
          <td>15</td>
          <td>6</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>16</td>
          <td>26</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>17</td>
          <td>46</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">202.5</th>
          <th>300.25</th>
          <td>18</td>
          <td>11</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>19</td>
          <td>31</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>20</td>
          <td>51</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">203.5</th>
          <th>300.25</th>
          <td>21</td>
          <td>16</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>22</td>
          <td>36</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>23</td>
          <td>56</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="12" valign="top">102.5</th>
          <th rowspan="3" valign="top">200.5</th>
          <th>300.25</th>
          <td>24</td>
          <td>2</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>25</td>
          <td>22</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>26</td>
          <td>42</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">201.5</th>
          <th>300.25</th>
          <td>27</td>
          <td>7</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>28</td>
          <td>27</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>29</td>
          <td>47</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">202.5</th>
          <th>300.25</th>
          <td>30</td>
          <td>12</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>31</td>
          <td>32</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>32</td>
          <td>52</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">203.5</th>
          <th>300.25</th>
          <td>33</td>
          <td>17</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>34</td>
          <td>37</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>35</td>
          <td>57</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="12" valign="top">103.5</th>
          <th rowspan="3" valign="top">200.5</th>
          <th>300.25</th>
          <td>36</td>
          <td>3</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>37</td>
          <td>23</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>38</td>
          <td>43</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">201.5</th>
          <th>300.25</th>
          <td>39</td>
          <td>8</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>40</td>
          <td>28</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>41</td>
          <td>48</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">202.5</th>
          <th>300.25</th>
          <td>42</td>
          <td>13</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>43</td>
          <td>33</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>44</td>
          <td>53</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">203.5</th>
          <th>300.25</th>
          <td>45</td>
          <td>18</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>46</td>
          <td>38</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>47</td>
          <td>58</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="12" valign="top">104.5</th>
          <th rowspan="3" valign="top">200.5</th>
          <th>300.25</th>
          <td>48</td>
          <td>4</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>49</td>
          <td>24</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>50</td>
          <td>44</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">201.5</th>
          <th>300.25</th>
          <td>51</td>
          <td>9</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>52</td>
          <td>29</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>53</td>
          <td>49</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">202.5</th>
          <th>300.25</th>
          <td>54</td>
          <td>14</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>55</td>
          <td>34</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>56</td>
          <td>54</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th rowspan="3" valign="top">203.5</th>
          <th>300.25</th>
          <td>57</td>
          <td>19</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>300.75</th>
          <td>58</td>
          <td>39</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>301.25</th>
          <td>59</td>
          <td>59</td>
          <td>0.25</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 53-54

Sort to F-style (z, y, x).  The first index (x) changes the fastest.

.. GENERATED FROM PYTHON SOURCE LINES 54-56

.. code-block:: Python

    blocks.sort_index(level=['z', 'y', 'x'])






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th></th>
          <th></th>
          <th>c_style_xyz</th>
          <th>f_style_zyx</th>
          <th>depth</th>
        </tr>
        <tr>
          <th>x</th>
          <th>y</th>
          <th>z</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>100.5</th>
          <th>200.5</th>
          <th>300.25</th>
          <td>0</td>
          <td>0</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>200.5</th>
          <th>300.25</th>
          <td>12</td>
          <td>1</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>200.5</th>
          <th>300.25</th>
          <td>24</td>
          <td>2</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>200.5</th>
          <th>300.25</th>
          <td>36</td>
          <td>3</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>200.5</th>
          <th>300.25</th>
          <td>48</td>
          <td>4</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>201.5</th>
          <th>300.25</th>
          <td>3</td>
          <td>5</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>201.5</th>
          <th>300.25</th>
          <td>15</td>
          <td>6</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>201.5</th>
          <th>300.25</th>
          <td>27</td>
          <td>7</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>201.5</th>
          <th>300.25</th>
          <td>39</td>
          <td>8</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>201.5</th>
          <th>300.25</th>
          <td>51</td>
          <td>9</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>202.5</th>
          <th>300.25</th>
          <td>6</td>
          <td>10</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>202.5</th>
          <th>300.25</th>
          <td>18</td>
          <td>11</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>202.5</th>
          <th>300.25</th>
          <td>30</td>
          <td>12</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>202.5</th>
          <th>300.25</th>
          <td>42</td>
          <td>13</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>202.5</th>
          <th>300.25</th>
          <td>54</td>
          <td>14</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>203.5</th>
          <th>300.25</th>
          <td>9</td>
          <td>15</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>203.5</th>
          <th>300.25</th>
          <td>21</td>
          <td>16</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>203.5</th>
          <th>300.25</th>
          <td>33</td>
          <td>17</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>203.5</th>
          <th>300.25</th>
          <td>45</td>
          <td>18</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>203.5</th>
          <th>300.25</th>
          <td>57</td>
          <td>19</td>
          <td>1.25</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>200.5</th>
          <th>300.75</th>
          <td>1</td>
          <td>20</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>200.5</th>
          <th>300.75</th>
          <td>13</td>
          <td>21</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>200.5</th>
          <th>300.75</th>
          <td>25</td>
          <td>22</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>200.5</th>
          <th>300.75</th>
          <td>37</td>
          <td>23</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>200.5</th>
          <th>300.75</th>
          <td>49</td>
          <td>24</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>201.5</th>
          <th>300.75</th>
          <td>4</td>
          <td>25</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>201.5</th>
          <th>300.75</th>
          <td>16</td>
          <td>26</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>201.5</th>
          <th>300.75</th>
          <td>28</td>
          <td>27</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>201.5</th>
          <th>300.75</th>
          <td>40</td>
          <td>28</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>201.5</th>
          <th>300.75</th>
          <td>52</td>
          <td>29</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>202.5</th>
          <th>300.75</th>
          <td>7</td>
          <td>30</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>202.5</th>
          <th>300.75</th>
          <td>19</td>
          <td>31</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>202.5</th>
          <th>300.75</th>
          <td>31</td>
          <td>32</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>202.5</th>
          <th>300.75</th>
          <td>43</td>
          <td>33</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>202.5</th>
          <th>300.75</th>
          <td>55</td>
          <td>34</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>203.5</th>
          <th>300.75</th>
          <td>10</td>
          <td>35</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>203.5</th>
          <th>300.75</th>
          <td>22</td>
          <td>36</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>203.5</th>
          <th>300.75</th>
          <td>34</td>
          <td>37</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>203.5</th>
          <th>300.75</th>
          <td>46</td>
          <td>38</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>203.5</th>
          <th>300.75</th>
          <td>58</td>
          <td>39</td>
          <td>0.75</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>200.5</th>
          <th>301.25</th>
          <td>2</td>
          <td>40</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>200.5</th>
          <th>301.25</th>
          <td>14</td>
          <td>41</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>200.5</th>
          <th>301.25</th>
          <td>26</td>
          <td>42</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>200.5</th>
          <th>301.25</th>
          <td>38</td>
          <td>43</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>200.5</th>
          <th>301.25</th>
          <td>50</td>
          <td>44</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>201.5</th>
          <th>301.25</th>
          <td>5</td>
          <td>45</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>201.5</th>
          <th>301.25</th>
          <td>17</td>
          <td>46</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>201.5</th>
          <th>301.25</th>
          <td>29</td>
          <td>47</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>201.5</th>
          <th>301.25</th>
          <td>41</td>
          <td>48</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>201.5</th>
          <th>301.25</th>
          <td>53</td>
          <td>49</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>202.5</th>
          <th>301.25</th>
          <td>8</td>
          <td>50</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>202.5</th>
          <th>301.25</th>
          <td>20</td>
          <td>51</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>202.5</th>
          <th>301.25</th>
          <td>32</td>
          <td>52</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>202.5</th>
          <th>301.25</th>
          <td>44</td>
          <td>53</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>202.5</th>
          <th>301.25</th>
          <td>56</td>
          <td>54</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>100.5</th>
          <th>203.5</th>
          <th>301.25</th>
          <td>11</td>
          <td>55</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>101.5</th>
          <th>203.5</th>
          <th>301.25</th>
          <td>23</td>
          <td>56</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>102.5</th>
          <th>203.5</th>
          <th>301.25</th>
          <td>35</td>
          <td>57</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>103.5</th>
          <th>203.5</th>
          <th>301.25</th>
          <td>47</td>
          <td>58</td>
          <td>0.25</td>
        </tr>
        <tr>
          <th>104.5</th>
          <th>203.5</th>
          <th>301.25</th>
          <td>59</td>
          <td>59</td>
          <td>0.25</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 57-60

Sort Order Check
----------------
Check the ordering by first sorting by x,y,z and confirming the c-raveled attribute is monotonic.

.. GENERATED FROM PYTHON SOURCE LINES 60-62

.. code-block:: Python

    assert np.array_equal(blocks.sort_index(level=['x', 'y', 'z'])['c_style_xyz'].values, np.arange(len(blocks)))








.. GENERATED FROM PYTHON SOURCE LINES 63-64

Similarly, sort by z,y,x and confirm the f-raveled attribute is monotonic.

.. GENERATED FROM PYTHON SOURCE LINES 64-67

.. code-block:: Python

    assert np.array_equal(blocks.sort_index(level=['z', 'y', 'x'])['f_style_zyx'].values, np.arange(len(blocks)))









.. GENERATED FROM PYTHON SOURCE LINES 68-70

Create OMF
----------

.. GENERATED FROM PYTHON SOURCE LINES 70-74

.. code-block:: Python


    omfp: OMFPandasWriter = OMFPandasWriter(filepath='test_blockmodel.omf')
    omfp.create_blockmodel(blocks=blocks, blockmodel_name='sort_check', allow_overwrite=True)








.. GENERATED FROM PYTHON SOURCE LINES 75-78

Export to Pandas
----------------
Check the round trip: pandas > omf > pandas

.. GENERATED FROM PYTHON SOURCE LINES 78-83

.. code-block:: Python


    blocks_omf = omfp.read_blockmodel(blockmodel_name='sort_check')

    pd.testing.assert_frame_equal(blocks, blocks_omf)








.. GENERATED FROM PYTHON SOURCE LINES 84-87

Visualise
---------
Plot the depth attribute to confirm the sort order is as expected.

.. GENERATED FROM PYTHON SOURCE LINES 87-90

.. code-block:: Python

    p = omfp.plot_blockmodel(blockmodel_name='sort_check', scalar='depth', threshold=False)
    p.show()




.. image-sg:: /auto_examples/images/sphx_glr_08_validate_blockmodel_sort_order_001.png
   :alt: 08 validate blockmodel sort order
   :srcset: /auto_examples/images/sphx_glr_08_validate_blockmodel_sort_order_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 91-92

Plot the c-raveled attribute.

.. GENERATED FROM PYTHON SOURCE LINES 92-96

.. code-block:: Python


    p: pv.Plotter = omfp.plot_blockmodel(blockmodel_name='sort_check', scalar='c_style_xyz', threshold=False)
    p.show()




.. image-sg:: /auto_examples/images/sphx_glr_08_validate_blockmodel_sort_order_002.png
   :alt: 08 validate blockmodel sort order
   :srcset: /auto_examples/images/sphx_glr_08_validate_blockmodel_sort_order_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 97-98

Plot the f-raveled attribute.

.. GENERATED FROM PYTHON SOURCE LINES 98-101

.. code-block:: Python


    p = omfp.plot_blockmodel(blockmodel_name='sort_check', scalar='f_style_zyx', threshold=False)
    p.show()



.. image-sg:: /auto_examples/images/sphx_glr_08_validate_blockmodel_sort_order_003.png
   :alt: 08 validate blockmodel sort order
   :srcset: /auto_examples/images/sphx_glr_08_validate_blockmodel_sort_order_003.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 2.102 seconds)


.. _sphx_glr_download_auto_examples_08_validate_blockmodel_sort_order.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 08_validate_blockmodel_sort_order.ipynb <08_validate_blockmodel_sort_order.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 08_validate_blockmodel_sort_order.py <08_validate_blockmodel_sort_order.py>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
